<!--
    操作区域模板
    @Author: tangDM
    @Date: 2019-03-07
-->
<template>
    <div class="dg-tpl__operation">
        <dg-button
            class="dg-tpl__operation--btn"
            v-for="item in buttonAllList"
            :key="item.type"
            type="text"
            size="small"
            @click.stop="e => item.call(scope, e)"
        >
            {{ item.name }}
        </dg-button>
    </div>
</template>

<script>
import _ from 'lodash';

export default {
    name: 'DgOperationTpl',

    props: {
        scope: Object,
        buttons: {
            type: [Object, Array],
            default: () => []
        }
    },
    computed: {
        buttonAllList() {
            let buttonList = [];
            if (!_.isArray(this.buttons)) {
                _.forOwn(this.buttons, (val, key) => {
                    buttonList.push({ name: key, call: val });
                });
                return buttonList;
            }

            this.buttons.forEach(item => {
                if (item.name && item.call) {
                    buttonList.push({ name: item.name, call: item.call, type: item.type });
                } else {
                    for (let key in item) {
                        buttonList.push({ name: key, call: item[key] });
                    }
                }
            });
            return buttonList;
        }
    }
};
</script>
