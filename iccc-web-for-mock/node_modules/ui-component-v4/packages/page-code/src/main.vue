<template>
    <div class="dg-page-code">
        <div class="dg-page-code__picture" :class="[type ? 'dg-page-code__picture--' + type : '']"></div>
        <div class="dg-page-code__box" v-if="$slots.default">
            <slot></slot>
        </div>
        <div class="dg-page-code__box" v-else>
            <h2 class="dg-page-code__title">{{ getTitle }}</h2>
            <h4 class="dg-page-code__en">{{ getEn }}</h4>
            <ul class="dg-page-code__msg">
                <li v-for="(item, index) in msgList" :key="index">{{ item }}</li>
            </ul>
            <div class="dg-page-code__advice" v-if="isAdvice">
                <p class="dg-page-code__tip">您可以选择：</p>
                <ul class="dg-page-code__option">
                    <li v-for="(item, index) in advice" :key="index">
                        <a class="dg-page-code__link" :href="item.link">{{ item.label }}</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</template>

<script>
export default {
    name: 'DgPageCode',
    props: {
        type: {
            type: String,
            default: '404',
            validator: function(val) {
                return ['404', '403', '500', '501'].indexOf(val) !== -1;
            }
        },
        title: String,
        en: String,
        msgList: {
            type: Array,
            default() {
                return ['输入网址不正确', '页面已被删除'];
            }
        },
        advice: {
            type: Array,
            default() {
                return [
                    {
                        label: '返回上一页',
                        link: '/'
                    },
                    {
                        label: '返回首页',
                        link: '/'
                    }
                ];
            }
        },
        isAdvice: {
            type: Boolean,
            default: false
        }
    },
    computed: {
        /**
         * 根据不同的错误类型
         * 显示对应的消息数据
         *
         * @return { String | *}
         */
        getTitle() {
            const titleList = {
                '403': '抱歉，服务资源不可用！',
                '404': '抱歉，您要找的页面不存在！',
                '500': '抱歉，服务器内部错误！',
                '501': '抱歉，服务器不具有请求功能！'
            };
            return this.title || titleList[this.type];
        },
        /**
         * 根据不同的错误类型
         * 显示对应的英文提示
         *
         * @return { String | *}
         */
        getEn() {
            const enList = {
                '403': 'Sorry, service resources are not available !',
                '404': 'Sorry, we cannot find the page you requested !',
                '500': 'Sorry, an internal server error !',
                '501': 'Sorry, the server does not have a request function !'
            };
            return this.en || enList[this.type];
        }
    }
};
</script>
