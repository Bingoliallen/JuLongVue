/**
 * 表码翻译指令
 * @Author: huangjq
 * @Date:   2019-04-08
 * @Project jz
 */
import utils from "@/common/utils";
const { ztData } = utils;
export default {
    bind: handler,
    update: handler,
    componentUpdated:  handler
}

function handler(el, binding){
    let params = {};
    if (binding.value.enum) {
        params["enum"] = binding.value.enum;
    } else if (binding.value.code) {
        params["code"] = binding.value.code;
    }
    ztData.fetchData(
        params,
        function(data) {
            if (data[el.textContent]) {
                el.textContent = data[el.textContent];
            }
        },
        "codeObj"
    );
}