/* Automatically generated by './build/bin/build-entry.js' */

import Alert from "./base/alert";
import Confirm from "./base/confirm";
import UEditor from "./base/ueditor/index.vue";
import DgExcel from "./excel";
import DgExcelImport from "./excel-import";
const baseComponents = [];

// 引入qb和jz基础组件
const baseComponentList = require.context("./", true, /(qb|jz)-base{1}\/(\S)*\.(js|vue)$/);
baseComponentList.keys().map(file => {
    baseComponents.push(baseComponentList(file).default);
});

import { Message } from "element-ui";
import { MessageBox, FormItem, Dialog, FormTable, Tag, Scrollbar, Card } from "ui-component-v4";
// import {
const components = [...baseComponents, Card, FormItem, FormTable, Tag, UEditor, Scrollbar, DgExcel, DgExcelImport];

const install = function(Vue) {
    components.forEach(component => {
        // 兼容低版本ui-component-v4没有组件时，跳过注册
        if (
            !component ||
            (component.mixins && component.mixins instanceof Array && component.mixins.some(item => item == undefined))
        ) {
            return;
        }
        Vue.component(component.name, component);
    });

    Object.defineProperty(Vue.prototype, "$dialog", { value: Dialog.layerDialog(Vue) });
    Object.defineProperty(Vue.prototype, "$alert", { value: Alert(MessageBox.alert) });
    Object.defineProperty(Vue.prototype, "$confirm", { value: Confirm(MessageBox.confirm) });
    Object.defineProperty(Vue.prototype, "$message", { value: Message });
};

export default {
    version: "1.0.0",
    install
};
