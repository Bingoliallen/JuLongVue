<template>
  <div class="scenes-bkdx">
    <qb-select
      v-bind="selectBind"
      :placeholder="selectPlaceholder"
      :data="selectData"
      v-model="bkdxlx"
      @change="selectChange"
    ></qb-select>
    <el-input v-bind="inputBind" :placeholder="inputPlaceholder" v-model="bkdxxx" @change="inputChange"></el-input>
  </div>
</template>

<script>
export default {
  name: 'scenes-bkdx',
  props: {
    // `${bkdxlx}|${bkdxxx}` 布控对象类型|布控对象信息的组合值
    value: String,
    selectBind: Object,
    inputBind: Object,
    selectPlaceholder: String,
    selectData: Array,
    inputPlaceholder: String
  },
  data() {
    return {
      // 布控对象类型
      bkdxlx: '',
      // 布控对象信息
      bkdxxx: ''
    };
  },
  watch: {
    value: {
      handler(val) {
        if (val) {
          const arr = val.split('|');
          this.bkdxlx = arr[0];
          this.bkdxxx = arr[1];
        }
      },
      immediate: true
    }
  },
  methods: {
    init() {},
    selectChange() {
      this.valueChange();
    },
    inputChange() {
      this.valueChange();
    },
    valueChange() {
      const value = `${this.bkdxlx || ''}|${this.bkdxxx || ''}`;
      this.$emit('input', value);
      this.$emit('change', value);
    }
  },
  created() {
    this.init();
  }
};
</script>

<style lang="scss" scoped>
.scenes-bkdx {
  .el-select {
    width: 180px;
  }
  .el-input {
    width: 300px;
  }
}
</style>
